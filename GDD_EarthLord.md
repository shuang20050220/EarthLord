# EarthLord 游戏设计文档 (GDD)

## 文档信息

| 项目 | 内容 |
|------|------|
| 游戏名称 | EarthLord (地球领主) |
| 游戏类型 | LBS生存策略游戏 |
| 平台 | iOS |
| 版本 | 1.0 |
| 文档创建日期 | 2026-01-09 |

---

## 1. 游戏概念

### 1.1 高概念 (High Concept)

> **在末日废土上，用双脚丈量土地，用双手重建文明。**

EarthLord 是一款将真实世界行走与末日生存游戏相结合的 LBS (Location-Based Service) 手游。玩家通过实际走路来圈占领地、探索废墟获取资源、建造设施、与其他幸存者交易和交流，共同在废土之上重建希望。

### 1.2 核心玩法一句话描述

**"Walk to Claim, Explore to Survive, Build to Thrive"**
（走路圈地，探索生存，建设繁荣）

### 1.3 独特卖点 (USP)

1. **真实行走圈地**: 不是虚拟点击，而是用GPS追踪玩家真实行走轨迹来划定领地
2. **希望朋克美学**: 区别于传统废土的绝望感，强调废墟中的重生与希望
3. **LBS社交体验**: 基于地理位置的玩家发现、交易和通讯系统
4. **Walk to Earn**: 将运动与游戏奖励结合，激励健康生活

---

## 2. 世界观与叙事

### 2.1 背景故事

#### 时间线

| 年份 | 事件 |
|------|------|
| **2048年** | "世界战争"爆发，全球文明在72小时内崩塌，99%的人口消失 |
| **2051年** | 幸存者从废墟中走出，《新开拓者协议》颁布 |
| **现在** | 玩家作为开拓者，在新世界中重建家园 |

#### 《新开拓者协议》核心法则

> **"凡以双足丈量之无主土地，皆为开拓者所有。"**

这条法则的设计灵感来自于儿时在沙滩上画圈占地——用树枝从一个点开始，绑着走一大圈，回到起点，圈起来的沙滩就是你的"领地"。

现在，玩家的"树枝"变成了手机里的GPS，"沙滩"变成了整个城市，每一步都被卫星记录。

### 2.2 视觉风格：希望朋克 (Hopepunk)

**核心理念**: 这不是一个关于绝望的末日故事，而是一个关于**重建与希望**的故事。

**视觉特征**:
- 废土之上，绿色植物破土而出
- 破败的建筑上，新生的标志闪闪发光
- 色调以暖色为主，象征希望
- 废墟中穿插生机勃勃的元素

**对比传统废土风格**:

| 传统废土 | 希望朋克 |
|----------|----------|
| 灰暗、死寂 | 废墟中有生机 |
| 强调生存压力 | 强调重建希望 |
| 人性黑暗面 | 互助与合作 |
| 冷色调为主 | 暖色与绿色点缀 |

### 2.3 玩家角色定位

玩家扮演一名从避难所醒来的**开拓者**，是新世界秩序的建设者。

**角色成长路径**:
1. **新手开拓者**: 从避难所醒来，一无所有
2. **领地拥有者**: 圈下第一块地，有了自己的家
3. **资源收集者**: 探索废墟，积累物资
4. **建设者**: 建造设施，发展领地
5. **领主**: 拥有多块领地，成为区域强者

---

## 3. 核心游戏循环

### 3.1 主循环图解

```
┌─────────────────────────────────────────────────────────────┐
│                      游戏核心循环                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   登录注册 → 圈地占领 → 探索搜刮 → 获得资源                   │
│      ↑                              ↓                       │
│      │         ┌──────────────────────────────┐            │
│      │         │  资源用途：                    │            │
│      │         │  • 建造建筑（消耗资源）         │            │
│      │         │  • 交易换物（流通资源）         │            │
│      │         │  • 生存消耗（食物/水）          │            │
│      │         └──────────────────────────────┘            │
│      │                              ↓                       │
│      └──────── 通讯社交 ← 成就排行 ← 发展壮大               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 循环逻辑说明

**第一阶段：获取身份**
- 玩家登录/注册，获得开拓者身份
- 这是进入游戏世界的入口

**第二阶段：圈地占领**
- 通过实际行走，用GPS绘制领地边界
- 闭合路径后，土地归属玩家
- 关键逻辑：先有"家"，才能发展

**第三阶段：探索搜刮**
- 走出领地，探索周边真实POI
- 进入POI范围后可搜刮资源
- 不同POI产出不同类型资源

**第四阶段：资源运用**
- **消耗**: 用于建造建筑
- **流通**: 用于与其他玩家交易
- **生存**: 食物和水维持生存体征

**第五阶段：发展壮大**
- 建造更多建筑，提升领地价值
- 解锁成就，提升排名
- 升级通讯设备，扩大社交范围

---

## 4. 游戏系统设计

### 4.1 领地系统

#### 4.1.1 GPS圈地机制

**操作流程**:
1. 玩家点击"开始开拓"按钮
2. 开始行走，GPS实时追踪并绘制蓝色轨迹线
3. 玩家绕行一圈，回到起点附近
4. 系统检测路径闭合，自动连接成多边形
5. 验证通过后，多边形填充为绿色，土地归属玩家

**验证规则**:

| 规则 | 说明 |
|------|------|
| 闭合检测 | 终点距起点 ≤ 30米视为闭合 |
| 速度检测 | 移动速度异常（>30km/h）触发警告 |
| 重叠检测 | 不能与他人领地重叠 |
| 自交检测 | 路径不能自己交叉 |

**视觉反馈**:
- 行走中：蓝色虚线轨迹
- 闭合成功：绿色填充多边形
- 验证失败：红色高亮 + 提示原因

#### 4.1.2 领地管理

**领地属性**:

| 属性 | 说明 |
|------|------|
| 名称 | 玩家自定义，如"优胜美地" |
| 面积 | 自动计算，单位平方米 |
| 建筑数量 | 领地内已建造的建筑数 |
| 交易开关 | 是否允许他人在附近看到交易挂单 |

**活跃规则**:
- 30天内必须开始建设
- 90天内必须保持活跃（登录/操作）
- 违反规则将触发领地回收预警

---

### 4.2 探索系统

#### 4.2.1 POI发现机制

**POI（兴趣点）来源**: Apple MapKit 提供的真实地理数据

**触发机制**: 地理围栏 (Geofencing)
- 玩家进入POI周围50-100米范围
- 系统弹出"发现兴趣点"提示
- 玩家点击"搜刮"获取资源

**POI类型与资源映射**:

| POI类型 | 代表地点 | 产出资源 | 资源示例 |
|---------|----------|----------|----------|
| 医疗 | 医院、药店、诊所 | 药品 | 急救包、抗生素、绷带 |
| 餐饮 | 超市、餐厅、便利店 | 食物 | 罐头食品、饮用水、面包 |
| 工业 | 工厂、工地、仓库 | 金属 | 铁矿、钢材、零件 |
| 自然 | 公园、林地、湖泊 | 木材 | 木头、树枝、植物纤维 |
| 金融 | 银行、珠宝店 | 稀有 | 电子元件、贵金属 |

#### 4.2.2 搜刮机制

**搜刮产出计算**:
```
基础产出 = POI类型基础值
最终产出 = 基础产出 × 随机系数(0.8~1.2) × 探索距离加成 × 会员加成
```

**冷却机制**:
- 同一POI搜刮后进入冷却（2-4小时）
- 冷却期间显示灰色，无法再次搜刮

**探索统计**:
- 探索距离（累计公里数）
- 探索时长（本次耗时）
- 获得物品清单

---

### 4.3 资源与背包系统

#### 4.3.1 资源分类

| 大类 | 子类 | 用途 |
|------|------|------|
| **生存资源** | 食物、水 | 维持生存体征 |
| **建造资源** | 木材、石头、金属 | 建造建筑 |
| **稀有资源** | 电子元件、卫星模块 | 高级建筑/升级 |
| **消耗品** | 药品、工具 | 恢复/增益 |

#### 4.3.2 背包机制

**容量系统**:
- 初始容量：100格
- 可通过建造仓库扩展
- 满载时无法搜刮新物品

**本地优先架构**:
- 背包数据优先存储在本地
- 离线状态可查看和使用物品
- 联网后自动同步云端

---

### 4.4 建造系统

#### 4.4.1 建筑分类与等级

**建筑分类**:

| 分类 | 建筑 | 功能 |
|------|------|------|
| **生存类** | 篝火、庇护所、医疗站 | 基础生存需求 |
| **储存类** | 小仓库、中仓库、大仓库 | 扩展背包容量 |
| **生产类** | 农田、工作台、冶炼炉 | 持续产出资源 |
| **能源类** | 太阳能板、风力发电机 | 提供电力 |

**建筑等级**:

| 等级 | 名称 | 解锁条件 |
|------|------|----------|
| Tier 1 | 生存基础 | 初始可建造 |
| Tier 2 | 功能扩展 | 需Tier 1建筑 + 更多资源 |
| Tier 3 | 高级设施 | 需Tier 2建筑 + 稀有资源 |

#### 4.4.2 建筑配方示例

| 建筑 | 所需资源 | 建造时间 |
|------|----------|----------|
| 篝火 | 石头×20, 木材×30 | 即时 |
| 庇护所 | 木材×100, 布料×50 | 30分钟 |
| 小仓库 | 木材×150, 金属×50 | 1小时 |
| 农田 | 木材×50, 土壤×100 | 2小时 |
| 太阳能板 | 金属×200, 电子元件×10 | 4小时 |

#### 4.4.3 建筑状态机

```
[建造中] → [待激活] → [运行中] ↔ [损坏]
                          ↓
                       [可升级]
```

**状态说明**:

| 状态 | 说明 | 可执行操作 |
|------|------|------------|
| 建造中 | 正在施工 | 取消 |
| 待激活 | 建造完成，未启用 | 激活 |
| 运行中 | 正常工作 | 升级、停用 |
| 损坏 | 需要维修 | 维修 |

---

### 4.5 交易系统

#### 4.5.1 交易机制

**以物易物**: 游戏不使用货币，采用物物交换

**交易流程**:
1. **发布挂单**: 选择"我提供"的物品和"我需要"的物品
2. **位置限制**: 只有进入玩家领地100米范围内的其他玩家才能看到挂单
3. **接受交易**: 符合条件的玩家可以接受交易
4. **自动完成**: 双方物品自动交换

**设计意图**:
- 鼓励玩家走出去探索
- 创造基于位置的社交机会
- 模拟末世物资流通

---

### 4.6 通讯系统

#### 4.6.1 设备等级体系

| 设备 | 功能 | 覆盖范围 | 获取方式 |
|------|------|----------|----------|
| 收音机 | 只能接收 | - | 初始装备 |
| 对讲机 | 可收发 | 3km | 升级/购买 |
| 营地电台 | 可收发 | 10km | 高级建筑 |
| 卫星通讯 | 可收发 | 全球 | 顶级设备 |

#### 4.6.2 公共频道

- 基于位置的区域聊天室
- 覆盖范围取决于设备等级
- 实时消息推送

#### 4.6.3 私有频道

- 玩家可创建/加入频道
- 类似微信群组功能
- 可用于组建联盟

#### 4.6.4 PTT (Push to Talk)

- 长按发送，松开结束
- 模拟真实对讲机操作
- 增强沉浸感

---

### 4.7 生存体征系统

#### 4.7.1 体征参数

| 参数 | 初始值 | 衰减速度 | 低于阈值影响 |
|------|--------|----------|--------------|
| 核心生命 | 100 | 取决于其他参数 | 归零则死亡 |
| 饱食度 | 100% | 每小时-5% | <30%开始掉血 |
| 水分 | 100% | 每小时-10% | <30%开始掉血 |

#### 4.7.2 状态增益

| 条件 | 增益效果 |
|------|----------|
| 饱食度 > 80% | 探索效率+10% |
| 水分 > 80% | 移动速度+5% |
| 双满 > 80% | 资源获取+15% |

#### 4.7.3 恢复机制

| 物品 | 恢复效果 |
|------|----------|
| 罐头食品 | 饱食度+20% |
| 饮用水 | 水分+25% |
| 急救包 | 核心生命+30 |
| 综合补给 | 全属性+15% |

---

### 4.8 成就与排行系统

#### 4.8.1 成就分类

| 类型 | 示例 | 奖励 |
|------|------|------|
| **新手引导** | 完成第一次圈地 | 100金币 |
| **探索成就** | 累计探索10km | 200金币 |
| **建造成就** | 建造10个建筑 | 300金币 |
| **社交成就** | 完成10次交易 | 250金币 |

**稀有度**:
- 普通 (Common) - 白色
- 稀有 (Rare) - 蓝色
- 史诗 (Epic) - 紫色
- 传说 (Legendary) - 金色

#### 4.8.2 排行榜

| 榜单 | 排名依据 |
|------|----------|
| 领地面积榜 | 总领地面积（平方米） |
| 探索废墟榜 | 累计探索POI数量 |
| 建筑数量榜 | 已建造建筑总数 |

**刷新机制**: 每5分钟更新一次，使用缓存减少数据库压力

---

## 5. 商业化设计

### 5.1 付费模式

#### 5.1.1 订阅制

| 等级 | 价格 | 权益 |
|------|------|------|
| **开拓者月卡** | $9.99/月 | 无限探索次数、范围扩大20% |
| **领主通行证** | $19.99/月 | 所有月卡权益 + 专属建筑皮肤 + 交易手续费减免 |

#### 5.1.2 资源包 (一次性购买)

| 资源包 | 价格 | 内容 |
|--------|------|------|
| 初级物资包 | $0.99 | 基础资源×50 |
| 中级物资包 | $2.99 | 混合资源×150 |
| 稀有资源包 | $9.99 | 稀有资源×20 + 高级资源×100 |

### 5.2 付费点设计原则

1. **不卖数值**: 付费玩家没有绝对优势
2. **时间换金钱**: 免费玩家可以通过时间达到相同效果
3. **便利性为主**: 主要卖的是便利和效率
4. **设备即付费点**: 通讯设备等级与付费挂钩

---

## 6. 用户体验设计

### 6.1 新手引导

**引导流程**:
1. 播放开场CG：展示末日背景和《新开拓者协议》
2. 创建角色（选择头像、昵称）
3. 第一次圈地教程（引导玩家完成小范围圈地）
4. 第一次探索教程（引导玩家前往附近POI）
5. 第一次建造教程（用获得的资源建造篝火）

**成就驱动学习**: 通过新手成就引导玩家探索各功能模块

### 6.2 UI/UX原则

| 原则 | 说明 |
|------|------|
| 地图优先 | 主界面以卫星地图为中心 |
| 信息层级 | 重要信息突出显示 |
| 操作反馈 | 每个操作都有明确的视觉/音效反馈 |
| 离线友好 | 核心信息离线可查看 |

### 6.3 多语言支持

| 语言 | 优先级 |
|------|--------|
| 简体中文 | P0 |
| 繁体中文 | P0 |
| English | P0 |
| 日本語 | P1 |
| 한국어 | P1 |

---

## 7. 技术实现要点

### 7.1 核心技术

| 技术 | 用途 | 优势 |
|------|------|------|
| Apple MapKit | 地图显示 | 免费、全球可用 |
| CoreLocation | GPS定位 | iOS原生支持 |
| PostGIS | 地理空间数据库 | 多边形存储、重叠检测 |
| Supabase Realtime | 实时消息 | 低延迟、易集成 |
| StoreKit 2 | 内购支付 | 苹果最新支付框架 |

### 7.2 架构模式

| 模式 | 应用场景 |
|------|----------|
| 本地优先 (Local First) | 背包数据、用户设置 |
| 状态机 (State Machine) | 建筑状态管理 |
| 发布-订阅 (Pub-Sub) | 成就系统事件监听 |
| 地理围栏 (Geofencing) | POI发现触发 |

---

## 8. 未来规划

### 8.1 计划功能

| 版本 | 功能 |
|------|------|
| v1.1 | 联盟系统 - 玩家组队 |
| v1.2 | 领地战争 - PvP玩法 |
| v2.0 | 世界事件 - 全服活动 |
| v2.1 | 载具系统 - 扩大探索范围 |

### 8.2 长期愿景

打造一个持续运营的虚实结合游戏世界，让玩家在现实中行走的每一步都有意义，在游戏中建设的每一砖都有价值。

---

## 附录A：核心代码文件索引

| 功能模块 | 核心文件 |
|----------|----------|
| 用户认证 | `AuthManager.swift` |
| GPS定位 | `LocationManager.swift` |
| 领地管理 | `TerritoryManager.swift` |
| POI发现 | `POIManager.swift` |
| 探索管理 | `ExplorationManager.swift` |
| 物品管理 | `ItemManager.swift` |
| 建筑管理 | `BuildingManager.swift` |
| 交易管理 | `TradeManager.swift` |
| 消息广播 | `RadioManager.swift` |
| 实时通讯 | `CommunicationManager.swift` |
| 频道管理 | `ChannelManager.swift` |
| 内购管理 | `StoreKitManager.swift` |
| 排行榜 | `LeaderboardManager.swift` |
| 成就系统 | `AchievementManager.swift` |
| 生存体征 | `VitalSignsManagerV2.swift` |

---

## 附录B：资源配方表

### 建筑配方

| 建筑名称 | Tier | 石头 | 木材 | 金属 | 布料 | 电子元件 |
|----------|------|------|------|------|------|----------|
| 篝火 | 1 | 20 | 30 | - | - | - |
| 庇护所 | 1 | - | 100 | - | 50 | - |
| 小仓库 | 1 | 50 | 150 | 50 | - | - |
| 农田 | 1 | 30 | 50 | - | - | - |
| 工作台 | 2 | 100 | 100 | 100 | - | - |
| 太阳能板 | 2 | - | - | 200 | - | 10 |
| 风力发电机 | 2 | 100 | 150 | 200 | - | 5 |
| 医疗站 | 2 | 50 | 100 | 50 | 100 | 5 |
| 大仓库 | 3 | 200 | 300 | 200 | - | 10 |

---

*文档结束*
